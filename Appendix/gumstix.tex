\section{Hardware}

\subsection{Hardware Summary}

\subsection{Pinouts}

\subsection{Online Resources}

\section{Gumstix Operating System}

\subsection{\r{A}ngstrom}

\subsection{Distribution Location}

\subsection{Bitbake and the Kernel}

\section{Software}

\subsection{WWLLN Software}

The WWLLN software is provided by James Brundell and compiled specifically for the ARM process.
The three programs are {\bf toga}, {\bf ntpcheck}, and {\bf GDspectro}.
{\bf toga} is the main WWLLN processing programming that reads in the VLF and GPS signals to produce the UDP packets sent on to the main WWLLN processors.
It should be always running on the system with a crontab entry such as:

\begin{verbatim}
0,5,10,15,20,25,30,35,40,45,50,55 * * * * toga -s 100 -a 3 -j 1 -g -o &
\end{verbatim}

This will try to start it every 5 minutes in case it stops for any reason.

The {\bf ntpcheck} and {\bf GDspectro} and programs used by {\bf toga} but do not need to be called or run on their own.

\subsection{Hardware Controls}

Pin GPIO145 is the pin that controls whether the preamp power supply is turned on or off.
When the pin is held low (value of 0) the power supply is on, when it is set high (value of 1) it is turned off.
The command to change a GPIO pin value is:

\begin{verbatim}
echo 0 > /sys/class/gpio/gpio145/value
\end{verbatim}

The two scripts {\bf preampOn.sh} and {\bf preampOff.sh} can be used to easily toggle the preamp power supply.

The default value for GPIO pins is to hold them high, so during boot the preamp turns off until the {\bf preampOn.sh} script can be called at the end of the boot sequence.

\subsection{GPS Interface}

The Trimble GPS communicates with the TSIP protocal, compared the NMEA of the previous GPS engine used.
The pythons script {\bf readTSIP.py} interprets the TSIP messages and reports the GPS status to the file gps.log and prints them to the console.
The console printing can be turned off by changing the variable print\_to\_console to False.

The program can be started and run in the background to produce a continues record of GPS activity.
The default location for the gps.log file is in the public\_html folder where it can be remotely checked through the service unit website.

\subsection{RAM Disk}

The \r{A}ngstrom distribution for Gumstix automatically sets up a RAM disk for users.
It is created at /media/ram with half of the available RAM (256~MB).
It needs to be used for the running of the WWLLN software as the microSD card is too slow.
At start-up the public\_html folder (logs and spectrograms) and sferics folder are created in the ram disk and symlinked to the main sferics directory.

For this reason all permanent edits to the Service Unit website should be made in the public\_html\_static directory.

\section{Creating Gumstix microSD Card}

%\lstinputlisting{../Gumstix/makeSD.sh}

\section{Gumstix System Setup}

\subsection{Connecting to the Gumstix}

\subsection{Installing Packages}

%\lstinputlisting{../Gumstix/firstRunFiles/install.sh}

\subsection{Configuring Settings}

%\lstinputlisting{../Gumstix/firstRunFiles/setup.sh}

\subsection{Sound Settings}
